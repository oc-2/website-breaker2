{
  "manifest": {
    "name": "proc-log",
    "version": "5.0.0",
    "files": [
      "bin/",
      "lib/"
    ],
    "main": "lib/index.js",
    "description": "just emit 'log' events on the process object",
    "repository": {
      "type": "git",
      "url": "git+https://github.com/npm/proc-log.git"
    },
    "author": {
      "name": "GitHub Inc."
    },
    "license": "ISC",
    "scripts": {
      "test": "tap",
      "snap": "tap",
      "posttest": "npm run lint",
      "postsnap": "eslint index.js test/*.js --fix",
      "lint": "npm run eslint",
      "postlint": "template-oss-check",
      "lintfix": "npm run eslint -- --fix",
      "template-oss-apply": "template-oss-apply --force",
      "eslint": "eslint \"**/*.{js,cjs,ts,mjs,jsx,tsx}\""
    },
    "devDependencies": {
      "@npmcli/eslint-config": "^5.0.0",
      "@npmcli/template-oss": "4.23.3",
      "tap": "^16.0.1"
    },
    "engines": {
      "node": "^18.17.0 || >=20.5.0"
    },
    "templateOSS": {
      "//@npmcli/template-oss": "This file is partially managed by @npmcli/template-oss. Edits may be overwritten.",
      "version": "4.23.3",
      "publish": true
    },
    "tap": {
      "nyc-arg": [
        "--exclude",
        "tap-snapshots/**"
      ]
    },
    "_registry": "npm",
    "_loc": "/home/runner/website-breaker2/.cache/yarn/v6/npm-proc-log-5.0.0-e6c93cf37aef33f835c53485f314f50ea906a9d8-integrity/node_modules/proc-log/package.json",
    "readmeFilename": "README.md",
    "readme": "# proc-log\n\nEmits events on the process object which a listener can consume and print to the terminal or log file.\n\nThis is used by various modules within the npm CLI stack in order to send log events that can be consumed by a listener on the process object.\n\nCurrently emits `log`, `output`, `input`, and `time` events.\n\n## API\n\n```js\nconst { log, output, input, time } = require('proc-log')\n```\n\n#### output\n* `output.standard(...args)` calls `process.emit('output', 'standard', ...args)`\n  \n  This is for general standard output.  Consumers will typically show this on stdout (after optionally formatting or filtering it).\n\n* `output.error(...args)` calls `process.emit('output', 'error', ...args)`\n  \n  This is for general error output.  Consumers will typically show this on stderr (after optionally formatting or filtering it).\n\n* `output.buffer(...args)` calls `process.emit('output', 'buffer', ...args)`\n  \n  This is for buffered output.  Consumers will typically buffer this until they are ready to display.\n\n* `output.flush(...args)` calls `process.emit('output', 'flush', ...args)`\n  \n  This is to indicate that the output buffer should be flushed.\n\n* `output.LEVELS` an array of strings of all output method names\n\n#### log\n* `log.error(...args)` calls `process.emit('log', 'error', ...args)`\n  \n  The highest log level.  For printing extremely serious errors that indicate something went wrong.\n\n* `log.warn(...args)` calls `process.emit('log', 'warn', ...args)`\n  \n  A fairly high log level.  Things that the user needs to be aware of, but which won't necessarily cause improper functioning of the system.\n\n* `log.notice(...args)` calls `process.emit('log', 'notice', ...args)`\n  \n  Notices which are important, but not necessarily dangerous or a cause for excess concern.\n\n* `log.info(...args)` calls `process.emit('log', 'info', ...args)`\n  \n  Informative messages that may benefit the user, but aren't particularly important.\n\n* `log.verbose(...args)` calls `process.emit('log', 'verbose', ...args)`\n  \n  Noisy output that is more detail that most users will care about.\n\n* `log.silly(...args)` calls `process.emit('log', 'silly', ...args)`\n  \n  Extremely noisy excessive logging messages that are typically only useful for debugging.\n\n* `log.http(...args)` calls `process.emit('log', 'http', ...args)`\n  \n  Information about HTTP requests made and/or completed.\n\n* `log.timing(...args)` calls `process.emit('log', 'timing', ...args)`\n  \n  Timing information.\n\n* `log.pause()` calls `process.emit('log', 'pause')`\n  \n  Used to tell the consumer to stop printing messages.\n\n* `log.resume()` calls `process.emit('log', 'resume')`\n  \n  Used to tell the consumer that it is ok to print messages again.\n\n* `log.LEVELS` an array of strings of all log method names\n\n#### input\n\n* `input.start(fn?)` calls `process.emit('input', 'start')`\n\n  Used to tell the consumer that the terminal is going to begin reading user input. Returns a function that will call `input.end()` for convenience.\n  \n  This also takes an optional callback which will run `input.end()` on its completion. If the callback returns a `Promise` then `input.end()` will be run during `finally()`.\n\n* `input.end()` calls `process.emit('input', 'end')`\n\n  Used to tell the consumer that the terminal has stopped reading user input.\n\n* `input.read(...args): Promise` calls `process.emit('input', 'read', resolve, reject, ...args)`\n\n  Used to tell the consumer that the terminal is reading user input and returns a `Promise` that the producer can `await` until the consumer has finished its async action.\n  \n  This emits `resolve` and `reject` functions (in addition to all passed in arguments) which the consumer must use to resolve the returned `Promise`.\n\n#### time\n\n* `time.start(timerName, fn?)` calls `process.emit('time', 'start', 'timerName')`\n\n  Used to start a timer with the specified name. Returns a function that will call `time.end()` for convenience.\n  \n  This also takes an optional callback which will run `time.end()` on its completion. If the callback returns a `Promise` then `time.end()` will be run during `finally()`.\n\n* `time.end(timerName)` calls `process.emit('time', 'end', timeName)`\n\n  Used to tell the consumer to stop a timer with the specified name.\n\n## Examples\n\n### log\n\nEvery `log` method calls `process.emit('log', level, ...otherArgs)` internally.  So in order to consume those events you need to do `process.on('log', fn)`.\n\n#### Colorize based on level\n\nHere's an example of how to consume `proc-log` log events and colorize them based on level:\n\n```js\nconst chalk = require('chalk')\n\nprocess.on('log', (level, ...args) => {\n  if (level === 'error') {\n    console.log(chalk.red(level), ...args)\n  } else {\n    console.log(chalk.blue(level), ...args)\n  }\n})\n```\n\n#### Pause and resume\n\n`log.pause` and `log.resume` are included so you have the ability to tell your consumer that you want to pause or resume your display of logs. In the npm CLI we use this to buffer all logs on init until we know the correct loglevel to display.  But we also setup a second handler that writes everything to a file even if paused.\n\n```js\nlet paused = true\nconst buffer = []\n\n// this handler will buffer and replay logs only after `procLog.resume()` is called\nprocess.on('log', (level, ...args) => {\n  if (level === 'resume') {\n    buffer.forEach((item) => console.log(...item))\n    paused = false\n    return\n  }Â \n\n  if (paused) {\n    buffer.push([level, ...args])\n  } else {\n    console.log(level, ...args)\n  }\n})\n\n// this handler will write everything to a file\nprocess.on('log', (...args) => {\n  fs.appendFileSync('debug.log', args.join(' '))\n})\n```\n\n### input\n\n### `start` and `end`\n\n**producer.js**\n```js\nconst { output, input } = require('proc-log')\nconst { readFromUserInput } = require('./my-read')\n\n// Using callback passed to `start`\ntry {\n  const res = await input.start(\n    readFromUserInput({ prompt: 'OK?', default: 'y' })\n  )\n  output.standard(`User said ${res}`)\n} catch (err) {\n  output.error(`User cancelled: ${err}`)\n}\n\n// Manually calling `start` and `end`\ntry {\n  input.start()\n  const res = await readFromUserInput({ prompt: 'OK?', default: 'y' })\n  output.standard(`User said ${res}`)\n} catch (err) {\n  output.error(`User cancelled: ${err}`)\n} finally {\n  input.end()\n}\n```\n\n**consumer.js**\n```js\nconst { read } = require('read')\n\nprocess.on('input', (level) => {\n  if (level === 'start') {\n    // Hide UI to make room for user input being read\n  } else if (level === 'end') {\n    // Restore UI now that reading is ended\n  }\n})\n```\n\n### Using `read` to call `read()`\n\n**producer.js**\n```js\nconst { output, input } = require('proc-log')\n\ntry {\n  const res = await input.read({ prompt: 'OK?', default: 'y' })\n  output.standard(`User said ${res}`)\n} catch (err) {\n  output.error(`User cancelled: ${err}`)\n}\n```\n\n**consumer.js**\n```js\nconst { read } = require('read')\n\nprocess.on('input', (level, ...args) => {\n  if (level === 'read') {\n    const [res, rej, opts] = args\n    read(opts).then(res).catch(rej)\n  }\n})\n```",
    "licenseText": "The ISC License\n\nCopyright (c) GitHub, Inc.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted, provided that the above\ncopyright notice and this permission notice appear in all copies.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\nWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\nMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\nANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\nWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\nACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR\nIN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/proc-log/-/proc-log-5.0.0.tgz#e6c93cf37aef33f835c53485f314f50ea906a9d8",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/proc-log/-/proc-log-5.0.0.tgz",
    "hash": "e6c93cf37aef33f835c53485f314f50ea906a9d8",
    "integrity": "sha512-Azwzvl90HaF0aCz1JrDdXQykFakSSNPaPoiZ9fm5qJIMHioDZEi7OAdRwSm6rSoPtY3Qutnm3L7ogmg3dc+wbQ==",
    "registry": "npm",
    "packageName": "proc-log",
    "cacheIntegrity": "sha512-Azwzvl90HaF0aCz1JrDdXQykFakSSNPaPoiZ9fm5qJIMHioDZEi7OAdRwSm6rSoPtY3Qutnm3L7ogmg3dc+wbQ== sha1-5sk883rvM/g1xTSF8xT1DqkGqdg="
  },
  "registry": "npm",
  "hash": "e6c93cf37aef33f835c53485f314f50ea906a9d8"
}